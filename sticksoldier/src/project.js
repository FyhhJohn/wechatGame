window.__require=function t(i,o,e){function c(s,a){if(!o[s]){if(!i[s]){var r=s.split("/");if(r=r[r.length-1],!i[r]){var _="function"==typeof __require&&__require;if(!a&&_)return _(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}}var l=o[s]={exports:{}};i[s][0].call(l.exports,function(t){return c(i[s][1][t]||t)},l,l.exports,t,i,o,e)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<e.length;s++)c(e[s]);return c}({SoundManager:[function(t,i,o){"use strict";cc._RF.push(i,"5e4d9+arwdDKJczx7muiCbF","SoundManager");var e=cc.Class({name:"SoundManager",properties:{_musicOn:!0,_musicAudioID:0,_musicName:"",_effectOn:!0,_effectAudioID:0},playMusic:function(t,i){""===t||this._musicName===t&&!i||(this._musicName=t,this._musicOn&&(cc.audioEngine.stop(this._musicAudioID),this._musicAudioID=cc.audioEngine.play("res/raw-assets/resources/media/"+t+".MP3",!0,.7)))},stopMusic:function(){null!=this._musicAudioID&&(cc.audioEngine.stop(this._musicAudioID),this._musicAudioID=null,this._musicName=null)},setMusic:function(t){this._musicOn=t,cc.sys.localStorage.setItem("MUSIC_ON",""+t),t?this._musicName&&this.playMusic(this._musicName,!0):cc.audioEngine.stop(this._musicAudioID)},playEffect:function(t){if(this._effectOn)return this._effectAudioID=cc.audioEngine.play("res/raw-assets/resources/media/"+t+".MP3",!1,1),this._effectAudioID},stopEffect:function(t){t&&cc.audioEngine.stop(t)},setEffect:function(t){this._effectOn=t,cc.sys.localStorage.setItem("EFFECT_ON",""+t),t||cc.audioEngine.stop(this._effectAudioID)}});window.SoundManager=new e,cc._RF.pop()},{}],game:[function(t,i,o){"use strict";cc._RF.push(i,"cf34dG2UWRKtqnr88FDGtHB","game"),cc.Class({extends:cc.Component,properties:{mainRoot:cc.Node,gameRoot:cc.Node,platformPrefab:cc.Prefab,playerPrefab:cc.Prefab,stickPrefab:cc.Prefab,platform_root:cc.Node,scoreLab:cc.Label,musicBtn:cc.Button,soundBtn:cc.Button,addSpeed:100,musicSF:[cc.SpriteFrame],soundSF:[cc.SpriteFrame],_platform_l:cc.Node,_platform_r:cc.Node,_player:cc.Node,_gameReady:!1,_stick:cc.Node,_isAdding:!1,_score:0,_addTime:0},start:function(){},onLoad:function(){this.mainRoot.active=!0,this.gameRoot.active=!1,this.initCollisionManager(),this.initTouchEvent(),this.resetButton()},initCollisionManager:function(){var t=cc.director.getCollisionManager();t.enabled=!0},initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},onStartClicked:function(){this.mainRoot.active=!1,this.gameRoot.active=!0,this.reset(),this.init(),window.SoundManager.playMusic("musictheme")},onMusicClicked:function(){window.SoundManager._musicOn?window.SoundManager.setMusic(!1):window.SoundManager.setMusic(!0),this.resetButton()},onSoundClicked:function(){window.SoundManager._effectOn?window.SoundManager.setEffect(!1):window.SoundManager.setEffect(!0),this.resetButton()},resetButton:function(){window.SoundManager._effectOn?this.soundBtn.node.getComponent(cc.Sprite).spriteFrame=this.soundSF[0]:this.soundBtn.node.getComponent(cc.Sprite).spriteFrame=this.soundSF[1],window.SoundManager._musicOn?this.musicBtn.node.getComponent(cc.Sprite).spriteFrame=this.musicSF[0]:this.musicBtn.node.getComponent(cc.Sprite).spriteFrame=this.musicSF[1]},onTouchStart:function(t){this._gameReady&&(this._gameReady=!1,this._isAdding=!0,this._stick.active=!0,this._stick.height=0,this._stick.angle=0,this._stick.position=cc.v2(this._platform_l.position.x+this._platform_l.width*this._platform_l.scaleX-10,this._platform_l.height),this._playerAni.play("player"),window.SoundManager.playEffect("stick"))},onTouchEnd:function(t){if(this._isAdding){this._isAdding=!1,this._stick.position=cc.v2(this._platform_l.position.x+this._platform_l.width*this._platform_l.scaleX,this._platform_l.height),this._stick.runAction(cc.rotateBy(.2,-90)),window.SoundManager.playEffect("stickdone");var i=this,o=1/this.addSpeed*this._stick.height;this._player.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){i._playerAni.stop("player"),i._playerAni.play("player_run"),i._player.position=cc.v2(i._stick.position.x,i._player.position.y),window.SoundManager.playEffect("soldierwalk")}),cc.moveBy(o,i._stick.height,0),cc.callFunc(function(){i._playerAni.stop(),i._playerAni.setCurrentTime(1,"player"),i.isOnPlatform()})))}},isOnPlatform:function(){var t=this._platform_r.getComponent("platform")._isOnPlatform;cc.log("_isOnPlatform = "+t);var i=this;if(t){this._stick.active=!1,this._platform_l.runAction(cc.moveTo(.5,-this._platform_l.width,this._platform_l.position.y)),this._platform_r.runAction(cc.moveTo(.5,0,this._platform_r.position.y));var o=this._platform_l;this._platform_l=this._platform_r,this._platform_r=o;var e=this._platform_l.width*this._platform_l.scaleX-this._player.width;this._player.runAction(cc.moveTo(.5,e,this._platform_l.height));var c=.5*Math.random()+.5,n=cc.winSize.width/2-i._platform_r.width*c-10,s=Math.random()*n+cc.winSize.width/2;this._platform_r.runAction(cc.sequence(cc.delayTime(.8),cc.callFunc(function(){i._platform_r.position=cc.v2(cc.winSize.width,i._platform_r.position.y),i._platform_r.scaleX=c}),cc.moveTo(.5,s,i._platform_r.position.y),cc.callFunc(function(){i._gameReady=!0}))),this._score++,this.scoreLab.string="\u5206\u6570:"+this._score,window.SoundManager.playEffect("wonderful")}else window.SoundManager.playEffect("gameover"),this._player.runAction(cc.sequence(cc.rotateBy(.2,-180),cc.moveBy(.5,0,-this._player.position.y),cc.callFunc(function(){cc.log("Game Over"),i.mainRoot.active=!0,i.gameRoot.active=!1,i.reset(),window.SoundManager.stopMusic()})))},update:function(t){this._isAdding&&(this._stick.height+=this.addSpeed*t,cc.log("height = "+this._stick.height),this._addTime+=t,this._addTime>=.4&&(this._addTime=0,window.SoundManager.playEffect("stick")))},reset:function(){this.platform_root.removeAllChildren(),this._score=0,this.scoreLab.string="\u5206\u6570:"+this._score,this._addTime=0},init:function(){var t=this;this._platform_l=cc.instantiate(this.platformPrefab),this._platform_l.position=cc.v2(cc.winSize.width/2,0),this._platform_l.parent=this.platform_root,this._platform_l.zIndex=10,this._platform_l.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,0,0),cc.callFunc(function(){t._platform_r=cc.instantiate(t.platformPrefab),t._platform_r.position=cc.v2(cc.winSize.width,0),t._platform_r.parent=t.platform_root;var i=.5*Math.random()+.5,o=cc.winSize.width/2-t._platform_r.width*i-10,e=Math.random()*o+cc.winSize.width/2;t._platform_r.runAction(cc.moveTo(.5,e,0)),t._platform_r.scaleX=i,t._platform_r.zIndex=10,t._gameReady=!0}))),this._player=cc.instantiate(this.playerPrefab),this._player.parent=this.platform_root;var i=this._platform_l.width-this._player.width;this._player.position=cc.v2(this._platform_l.position.x+i,this._platform_l.height),this._player.runAction(cc.sequence(cc.delayTime(1),cc.moveTo(.5,i,this._platform_l.height))),this._player.zIndex=11,this._playerAni=this._player.getComponent(cc.Animation),this._stick=cc.instantiate(this.stickPrefab),this._stick.parent=this.platform_root;var o=this._platform_l.width-this._stick.width-10;this._stick.position=cc.v2(o,this._platform_l.height),this._stick.height=0,this._stick.active=!1,this._stick.zIndex=11}}),cc._RF.pop()},{}],platform:[function(t,i,o){"use strict";cc._RF.push(i,"0b649lFeJZI+pb7dZQGwRh2","platform"),cc.Class({extends:cc.Component,properties:{_isOnPlatform:!1},start:function(){},onCollisionEnter:function(t,i){"player"==t.node.group&&(this._isOnPlatform=!0)},onCollisionExit:function(t,i){"player"==t.node.group&&(this._isOnPlatform=!1)}}),cc._RF.pop()},{}]},{},["SoundManager","game","platform"]);